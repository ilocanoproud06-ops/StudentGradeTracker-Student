<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Initialize Student Tracker Data</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .card {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #4f46e5;
      }
      .btn {
        background: #4f46e5;
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px 5px;
      }
      .btn:hover {
        background: #4338ca;
      }
      .btn-success {
        background: #10b981;
      }
      .btn-success:hover {
        background: #059669;
      }
      .btn-danger {
        background: #ef4444;
      }
      .btn-danger:hover {
        background: #dc2626;
      }
      #output {
        margin-top: 20px;
        padding: 15px;
        background: #f3f4f6;
        border-radius: 5px;
        white-space: pre-wrap;
        font-family: monospace;
        font-size: 12px;
        max-height: 300px;
        overflow-y: auto;
      }
      .success {
        color: #10b981;
      }
      .error {
        color: #ef4444;
      }
      .info {
        color: #3b82f6;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>üìö Student Tracker Data Initialization</h1>
      <p>
        This page will initialize localStorage with sample data for the Student
        Tracker application.
      </p>

      <div>
        <button class="btn btn-success" onclick="initializeData()">
          Initialize Sample Data
        </button>
        <button class="btn btn-danger" onclick="clearData()">
          Clear All Data
        </button>
      </div>

      <div id="output"></div>
    </div>

    <script>
      const DB_KEY = "academic_grade_system_v1";

      function log(message, type = "info") {
        const output = document.getElementById("output");
        const timestamp = new Date().toLocaleTimeString();
        output.innerHTML += `<div class="${type}">[${timestamp}] ${message}</div>\n`;
        console.log(message);
      }

      function initializeData() {
        const output = document.getElementById("output");
        output.innerHTML = "";

        try {
          // Sample Students - Using simple PINs (format: First letter of lastname + First letter of firstname + 3 digits)
          const students = [
            {
              id: 1,
              idNum: "IT5839",
              program: "IT",
              name: "John Smith",
              pin: "BJ001",
              email: "john.smith@example.com",
              year: "1st Year",
            },
            {
              id: 2,
              idNum: "CS5840",
              program: "CS",
              name: "Jane Doe",
              pin: "JD001",
              email: "jane.doe@example.com",
              year: "2nd Year",
            },
            {
              id: 3,
              idNum: "IS5841",
              program: "IS",
              name: "Michael Johnson",
              pin: "MJ001",
              email: "michael.j@example.com",
              year: "1st Year",
            },
            {
              id: 4,
              idNum: "CE5842",
              program: "CE",
              name: "Emily Brown",
              pin: "EB001",
              email: "emily.b@example.com",
              year: "3rd Year",
            },
            {
              id: 5,
              idNum: "EE5843",
              program: "EE",
              name: "David Wilson",
              pin: "DW001",
              email: "david.w@example.com",
              year: "2nd Year",
            },
            {
              id: 6,
              idNum: "ME5844",
              program: "ME",
              name: "Sarah Davis",
              pin: "SD001",
              email: "sarah.d@example.com",
              year: "1st Year",
            },
            {
              id: 7,
              idNum: "BA5845",
              program: "BA",
              name: "James Miller",
              pin: "JM001",
              email: "james.m@example.com",
              year: "4th Year",
            },
            {
              id: 8,
              idNum: "MA5846",
              program: "MA",
              name: "Lisa Anderson",
              pin: "LA001",
              email: "lisa.a@example.com",
              year: "3rd Year",
            },
          ];

          // Sample Courses
          const courses = [
            {
              id: 1,
              code: "CS101",
              title: "Introduction to Computer Science",
              schedule: "Mon/Wed 9:00-12:00",
              room: "Room 101",
              instructor: "Prof. Smith",
              hasLab: false,
            },
            {
              id: 2,
              code: "CS201",
              title: "Data Structures and Algorithms",
              schedule: "Tue/Thu 13:00-16:00",
              room: "Lab 201",
              instructor: "Prof. Johnson",
              hasLab: true,
            },
            {
              id: 3,
              code: "IT101",
              title: "Fundamentals of Information Technology",
              schedule: "Mon/Wed 13:00-16:00",
              room: "Room 102",
              instructor: "Prof. Williams",
              hasLab: true,
            },
            {
              id: 4,
              code: "CS301",
              title: "Database Management Systems",
              schedule: "Fri 9:00-12:00",
              room: "Lab 301",
              instructor: "Prof. Davis",
              hasLab: true,
            },
          ];

          // Sample Enrollments
          const enrollments = [
            {
              studentId: 1,
              courseId: 1,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 1,
              courseId: 3,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 2,
              courseId: 1,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 2,
              courseId: 2,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 3,
              courseId: 1,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 3,
              courseId: 3,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 4,
              courseId: 2,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 4,
              courseId: 4,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 5,
              courseId: 2,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 5,
              courseId: 3,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 6,
              courseId: 1,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 7,
              courseId: 4,
              year: "2024-2025",
              semester: "1st Semester",
            },
            {
              studentId: 8,
              courseId: 4,
              year: "2024-2025",
              semester: "1st Semester",
            },
          ];

          // Sample Groups
          const groups = [
            {
              id: 1,
              name: "Group A",
              courseId: 1,
              groupType: "Lecture",
              students: [1, 2],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 2,
              name: "Group B",
              courseId: 1,
              groupType: "Lecture",
              students: [3, 6],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 3,
              name: "Group Alpha",
              courseId: 2,
              groupType: "Laboratory",
              students: [2, 4, 5],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 4,
              name: "Group Beta",
              courseId: 2,
              groupType: "Laboratory",
              students: [],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 5,
              name: "IT Group 1",
              courseId: 3,
              groupType: "Laboratory",
              students: [1, 3, 5],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 6,
              name: "IT Group 2",
              courseId: 3,
              groupType: "Laboratory",
              students: [],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 7,
              name: "Database Team A",
              courseId: 4,
              groupType: "Laboratory",
              students: [4, 7, 8],
              nameEditCount: 0,
              maxMembers: 5,
            },
            {
              id: 8,
              name: "Database Team B",
              courseId: 4,
              groupType: "Laboratory",
              students: [],
              nameEditCount: 0,
              maxMembers: 5,
            },
          ];

          // Sample Grades (for some students)
          const grades = {
            "1_1": {
              written: {
                p: 85,
                m: 88,
                pf: 90,
                f: 92,
                pTitle: "Prelim Exam",
                mTitle: "Midterm Exam",
                pfTitle: "Pre-Final Exam",
                fTitle: "Final Exam",
              },
              quiz: { q1: 45, q2: 48, q3: 42, q4: 50 },
              pt: { p1: 85, p2: 90, p3: 88, p4: 92 },
              project: { p1: 95, p2: 88 },
            },
            "2_1": {
              written: { p: 78, m: 82, pf: 85, f: 88 },
              quiz: { q1: 40, q2: 42, q3: 45, q4: 44 },
              pt: { p1: 75, p2: 80, p3: 78, p4: 82 },
              project: { p1: 85, p2: 82 },
            },
          };

          // Create store object
          const store = {
            courses: courses,
            students: students,
            enrollments: enrollments,
            grades: grades,
            assessments: [],
            groups: groups,
            hps: { quiz: 50, pt: 100, project: 100, exam: 100, written: 100 },
            weights: { written: 40, quiz: 20, pt: 30, project: 10 },
            gradingScale: [
              { min: 95, max: 100, label: "A" },
              { min: 90, max: 94, label: "A-" },
              { min: 85, max: 89, label: "B+" },
              { min: 80, max: 84, label: "B" },
              { min: 75, max: 79, label: "B-" },
              { min: 70, max: 74, label: "C+" },
              { min: 65, max: 69, label: "C" },
              { min: 60, max: 64, label: "C-" },
              { min: 55, max: 59, label: "D" },
              { min: 0, max: 54, label: "F" },
            ],
          };

          // Save to localStorage
          localStorage.setItem(DB_KEY, JSON.stringify(store));

          log("‚úÖ Data initialized successfully!", "success");
          log(`üìä Created ${students.length} students`, "success");
          log(`üìö Created ${courses.length} courses`, "success");
          log(`üë• Created ${enrollments.length} enrollments`, "success");
          log(`üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Created ${groups.length} groups`, "success");
          log(
            `üìù Created ${Object.keys(grades).length} grade records`,
            "success",
          );

          log("\nüìã Sample Login Credentials:", "info");
          log("--------------------------------", "info");
          students.forEach((s) => {
            log(`  Student: ${s.name}`, "info");
            log(`    ID: ${s.idNum}`, "info");
            log(`    PIN: ${s.pin}`, "info");
            log("", "info");
          });

          log(
            "\nüéØ You can now login to student.html with any of the above credentials!",
            "success",
          );
        } catch (error) {
          log("‚ùå Error: " + error.message, "error");
          console.error(error);
        }
      }

      function clearData() {
        if (
          confirm(
            "Are you sure you want to clear all data? This cannot be undone.",
          )
        ) {
          localStorage.removeItem(DB_KEY);
          document.getElementById("output").innerHTML = "";
          log("üóëÔ∏è All data cleared!", "error");
        }
      }

      // Check if data already exists
      window.onload = function () {
        const existing = localStorage.getItem(DB_KEY);
        if (existing) {
          log("‚ÑπÔ∏è Data already exists in localStorage", "info");
          log(
            "Click 'Clear All Data' first if you want to reinitialize.",
            "info",
          );
        } else {
          log(
            "‚ÑπÔ∏è No data found. Click 'Initialize Sample Data' to add sample data.",
            "info",
          );
        }
      };
    </script>
  </body>
</html>
